# Cross configuration for OpenSSL support in cross-compilation containers
# Musl targets typically use Alpine-based images (apk), but fallback to apt-get if needed

[target.x86_64-unknown-linux-musl]
pre-build = [
  # Alpine-based musl images use apk; pkgconf is required (not pkgconfig)
  "apk add --no-cache pkgconf openssl-dev || (apt-get update && apt-get install -y pkg-config libssl-dev)"
]

[target.aarch64-unknown-linux-musl]
pre-build = [
  # Alpine-based musl images use apk; pkgconf is required (not pkgconfig)
  "apk add --no-cache pkgconf openssl-dev || (apt-get update && apt-get install -y pkg-config libssl-dev)"
]

[target.aarch64-unknown-linux-gnu]
pre-build = [
  # Debian-based images use apt-get
  "dpkg --add-architecture arm64",
  "apt-get update && apt-get install --assume-yes -y libssl-dev:arm64 pkg-config"
]
